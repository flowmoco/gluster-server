version: "3.3"
services:
  gluster-server:
    image: flowmoco/gluster-server:v1.0.0
    deploy:
      mode: global
      endpoint_mode: dnsrr
      placement:
        constraints:
          - gluster.mount.ssd == true
    networks:
      - gluster
    volumes:
      - /data/glusterfs:/data/glusterfs
      - metadata:/var/lib/glusterd
networks:
  gluster:
    external: true
volumes:
  metadata: